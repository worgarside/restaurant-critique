extends partials/layout

block content
    #{features = ["Parking", "WiFi", "Takeout", "Delivery", "Outdoor Seating", "Reservations", "Alcohol", "Vegetarian", "Vegan"]}
    #{daysOfWeek = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]}
    if (user)
        script let userPostcode = `#{user.postcode}`;
    else
        script let userPostcode = 'S1 2JA';
    br
    .container
        .row
            .col
                h1 Add a Restaurant
                br
        .row
            .col-10.offset-1
                form(action='/restaurant/new/add_restaurant', method='post', enctype="multipart/form-data")
                    .form-row
                        .col-6
                            .form-row
                                .form-group.col
                                    label(for='restaurantName') Restaurant Name
                                    input.form-control#restaurantName(type='text', name='restaurantName',
                                    placeholder="Tom's Bistro", required, autocomplete='none')

                            #address-input-choice
                                .form-row
                                    .form-group.col
                                        .btn-group
                                            button.btn.btn-secondary.address-input#address-lookup-button(type='button') Address Lookup
                                            button.btn.btn-secondary.address-input#address-map-button(type='button') Set location on map

                            #address-lookup-form
                                .form-row
                                    .form-group.col-8
                                        label(for='address-search') Address Line 1
                                        input.form-control#address-search(type='text', name='address-search', placeholder='221b', autocomplete='none')
                                    .form-group.col-4
                                        label(for='postcode-search') Post Code
                                        input.form-control#postcode-search(type='text', name='postcode', placeholder='SW1A 1AA', autocomplete='none')
                                .form-row
                                    .form-group.col
                                        button.btn(type='button', onclick='findAddress();') Find address

                            #address-lookup-found
                                .form-row
                                    .form-group.col
                                        .address-input-found-controls
                                            a#address-lookup-found-correct(href='javascript:void(0)', onclick='confirmAddress();')
                                                span.oi.oi-check(aria-hidden='true')
                                            a#address-lookup-found-edit(href='javascript:void(0)', onclick='editAddress();')
                                                span.oi.oi-pencil(aria-hidden='true')
                                            a#address-lookup-found-incorrect(href='javascript:void(0)', onclick='rejectAddress();')
                                                span.oi.oi-circle-x(aria-hidden='true')
                                        p#found-address
                            #found-address-edit
                                .form-row
                                    .form-group.col
                                        label(for='address1') Address Line 1
                                        input.form-control#address1(type='text', name='address1', placeholder='221b', autocomplete='none')
                                .form-row
                                    .form-group.col
                                        label(for='address2') Address Line 2
                                        input.form-control#address2(type='text', name='address2', placeholder='Baker Street', autocomplete='none')
                                .form-row
                                    .form-group.col-6
                                        label(for='city') City
                                        input.form-control#city(type='text', name='city', placeholder='London', autocomplete='none')
                                    .form-group.col-6
                                        label(for='postcode') Postcode
                                        input.form-control#postcode(type='text', name='postcode', placeholder='NW1 6XE', required, autocomplete='none')

                            #found-address-map-wrapper
                                .form-row
                                    .form-group.col
                                        #found-address-map

                            #address-map-form
                                .form-row
                                    .col
                                        label(for='new-map') Find the Restaurant
                                        #new-map






                            .form-row
                                .form-group.col-8
                                    label(for='url') Restaurant Website
                                    input.form-control#url(type='text', name='url', placeholder='www.toms-bistro.pawnee', autocomplete='none')
                                .form-group.col-4
                                    label(for='phone') Phone
                                    input.form-control.no-spinner#phone(style="padding-left: 9px; padding-right: 9px;", type='number', name='phone', placeholder='07700 900461', autocomplete='none')
                            .form-row
                                .form-group.col
                                    label(for='menu') Menu Link
                                    input.form-control#menu(type='text', name='menu', placeholder='www.toms-bistro.pawnee/menu', autocomplete='none')
                            label(for='days-of-week') Opening Times
                            .form-row.opening-times-form
                                .form-group.col-3
                                    select#days-of-week.form-control.opening-times-form
                                        option(value='0') Mon
                                        option(value='1') Tue
                                        option(value='2') Wed
                                        option(value='3') Thu
                                        option(value='4') Fri
                                        option(value='5') Sat
                                        option(value='6') Sun
                                .form-group.col-3
                                    input.form-control.opening-times.opening-times-form#opening-time
                                .form-group.col-3
                                    input.form-control.opening-times.opening-times-form#closing-time
                                .form-group.col-3
                                    button.btn.btn-default.opening-times-form#add-times(onclick="addTimes();", type="button") Add
                            .form-row#selected-times-row(hidden=true)
                                .form-group.col
                                    #selected-opening-times
                            .form-row
                                .form-group.col
                                    label(for='description') Description
                                    textarea.form-control#description(maxlength="200", name='description',
                                    placeholder="Say some things about the restaurant's atmosphere, the kind of " +
                                    "food served, or whatever you feel like!" , rows=4, style='resize: none')
                            .form-row
                                .form-group.col-12
                                    label(for='price-range') Price Range
                                    select#price-range.form-control(name='priceRange')
                                        option(value='', disabled, selected) Price Range
                                        option(value='0') £ - Inexpensive
                                        option(value='1') ££ - Average
                                        option(value='2') £££ - Above Average
                                        option(value='3') ££££ - Premium
                            .form-row
                                .form-group.col
                                    label(for='category') Category
                                    select#category.form-control(name='category', required, autocomplete='none')
                                        option(value='', disabled, selected) Category
                                        option(value='6') Fast Food
                                        option(value='5') Italian
                                        option(value='4') Nando's
                                        option(value='3') Mexican
                                        option(value='2') Malaysian
                                        option(value='1') Fishy Fingers
                                        option(value='0') Other

                        .col-5.offset-1
                            .form-row
                                .col-1.offset-5.text-center
                                    p Yes
                                .col-1.offset-1.text-center
                                    p No
                            each feature in features
                                .form-row
                                    .col-4.text-right
                                        p #{feature}
                                    .col-1.offset-1.text-center
                                        input(type="radio", name=`${feature.replace(/[ ]/g, "").toLowerCase()}`, value=1, autocomplete='none')
                                    .col-1.offset-1.text-center
                                        input(type="radio", name=`${feature.replace(/[ ]/g, "").toLowerCase()}`, value=0, autocomplete='none')

                    .opening-times-body(hidden=true)
                        each day in daysOfWeek
                            input(type="number", name=`${day.toLowerCase()}Open`, autocomplete='none', readonly)
                            input(type="number", name=`${day.toLowerCase()}Close`, autocomplete='none', readonly)

                    .form-row
                        .form-group.col
                            .float-right
                                input.btn(type='submit', value='Submit Restaurant')

    script(type='text/javascript', src='/javascripts/restaurant_new.js')
    script(src='https://maps.googleapis.com/maps/api/js?key=AIzaSyDlmGXTAyXPQy1GX02s8UDm1OLBNz6zia0&callback=initMap')
